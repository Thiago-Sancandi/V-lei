<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Jogo de Vôlei 2x2</title>
  <style>
    body { background: #222; margin: 0; overflow: hidden; }
    canvas { display: block; margin: 0 auto; background: #87CEEB; image-rendering: pixelated; }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="480"></canvas>
<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  // Configurações iniciais
  const court = { w: 800, h: 480, netHeight: 100 };
  const gravity = 0.4;

  function createPlayer(x, y, color) {
    return {
      x, y, vx: 0, vy: 0, w: 20, h: 40,
      color,
      grounded: false
    };
  }

  const players = [
    createPlayer(150, 400, "red"),
    createPlayer(250, 400, "orange"),
    createPlayer(550, 400, "blue"),
    createPlayer(650, 400, "cyan")
  ];

  const ball = {
    x: court.w / 2, y: 200, r: 10,
    vx: 4, vy: -4
  };

  const keys = {};
  document.addEventListener("keydown", e => keys[e.key] = true);
  document.addEventListener("keyup", e => keys[e.key] = false);

  function updatePlayer(p, left, right, jump) {
    // Movimento horizontal
    if (keys[left]) p.vx = -4;
    else if (keys[right]) p.vx = 4;
    else p.vx = 0;

    // Pulo
    if (keys[jump] && p.grounded) {
      p.vy = -10;
      p.grounded = false;
    }

    p.vy += gravity;
    p.x += p.vx;
    p.y += p.vy;

    // Colisão com o chão
    if (p.y + p.h > court.h) {
      p.y = court.h - p.h;
      p.vy = 0;
      p.grounded = true;
    }
  }

  function updateBall() {
    ball.vy += gravity;
    ball.x += ball.vx;
    ball.y += ball.vy;

    // Chão
    if (ball.y + ball.r > court.h) {
      ball.y = court.h - ball.r;
      ball.vy *= -0.6;
    }

    // Paredes
    if (ball.x - ball.r < 0 || ball.x + ball.r > court.w) {
      ball.vx *= -1;
    }

    // Colisão com jogadores
    for (let p of players) {
      const dx = ball.x - (p.x + p.w / 2);
      const dy = ball.y - (p.y + p.h / 2);
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < ball.r + Math.max(p.w, p.h) / 2) {
        ball.vx = dx * 0.2;
        ball.vy = dy * 0.2;
      }
    }
  }

  function drawCourt() {
    ctx.fillStyle = "#F4A460";
    ctx.fillRect(0, court.h - 20, court.w, 20); // areia

    ctx.fillStyle = "white";
    ctx.fillRect(court.w / 2 - 5, court.h - court.netHeight, 10, court.netHeight); // rede
  }

  function drawPlayer(p) {
    ctx.fillStyle = p.color;
    ctx.fillRect(p.x, p.y, p.w, p.h);
  }

  function drawBall() {
    ctx.fillStyle = "white";
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
    ctx.fill();
  }

  function loop() {
    ctx.clearRect(0, 0, court.w, court.h);

    // Atualiza jogadores
    updatePlayer(players[0], "a", "d", "w");
    updatePlayer(players[1], "j", "l", "i");
    updatePlayer(players[2], "ArrowLeft", "ArrowRight", "ArrowUp");
    updatePlayer(players[3], ",", ".", "/");

    updateBall();
    drawCourt();
    players.forEach(drawPlayer);
    drawBall();

    requestAnimationFrame(loop);
  }

  loop();
</script>
</body>
</html>
